package main

import (
	"bet25-calendar-sync/rebok_api"
	"fmt"
	"io"
	"net/http"
	"net/url"
	"strings"
)

func main2(user rebok_api.RebokApiUser) {

	reqUrl := "https://rebok.se/default.aspx?c=kanal75"
	method := "POST"

	username := url.QueryEscape(user.Username)

	payload := strings.NewReader("ctl00%24CtrlMenuTop1%24ctrlUserPanel1%24activeComp=kanal75&ctl00%24cpMain%24ctl00%24ctrlLogin1%24tbUsername=" + username + "&ctl00%24cpMain%24ctl00%24ctrlLogin1%24tbPassword=••••••" + user.Password + "&__EVENTTARGET=ctl00%24cpMain%24ctl00%24ctrlLogin1%24btnLogin&__EVENTARGUMENT=&__VIEWSTATEGENERATOR=CA0B0334&__EVENTVALIDATION=%2FwEdAAYkbw8ORALStEkzBaUjFNDklyAyffgGGOqUedA65u5urP%2BYDvfolijYlnGq8jIinlI24RKjr%2FnhpGJlowvOMRw2766HccErQapcOPH22LIzzF3h532NjFUlv0EIV03chIDFoWyGMHxOLzE9ydaiBGS5J1%2FuyZApv7zrJbZee4Q5kw%3D%3D&__VIEWSTATE=%2FwEPDwUKMTMzMTM1NTAzNA8WAh4TVmFsaWRhdGVSZXF1ZXN0TW9kZQIBFgJmD2QWBmYPZBYCAgUPFgIeBGhyZWYFHi4uL3N0YXRpYy9jc3MvY3NzXzEuNi41LjBfLmNzc2QCAQ9kFgRmD2QWBgIFD2QWAgIBDxYCHgtfIUl0ZW1Db3VudAL%2F%2F%2F%2F%2FD2QCBw8WAh8CAv%2F%2F%2F%2F8PZAIJD2QWAmYPFgIeB1Zpc2libGVoZAIBD2QWAgIBD2QWAmYPZBYCZg9kFghmD2QWAgIBD2QWAgINDw8WAh4EVGV4dGVkZAIBDxYCHwNoZAICD2QWAgIBDw8WAh8DaGRkAgMPZBYCAgEPZBYCAgcPDxYCHwRkZGQCAg8WAh8DaGRk3ZxCe0AQ4RjNnrzUJf%2F%2FNTz%2Fue4BqUWNQY96OjXV9Ow%3D")

	client := &http.Client{}
	req, err := http.NewRequest(method, reqUrl, payload)

	if err != nil {
		fmt.Println(err)
		return
	}
	req.Header.Add("Cookie", ".REBOK=577011B368CF2FCCA7EF0F85B9A72AAB1D9843CF87F4D104B02F3F98CCFD7502D86E87625BCF9FFAC756FC9285B0C216ACAA56C1F39C3D15DA7BDAFD2DFC3E41A53EA6A7DF25E49DB5D857D7E7427D23AE79334ED9236B56C2204095955F26468A70CAD5B0B3749734DB9465396C944491819E02EF04E543173E66F04B000E3765B1DB65F29CFB51EFE4DBF75FB276834C3B1C84879542DDD5B0ADD4BE81B3D42AE58BD249CC8D6BCAE9B98D0263095F4B89BB06A0247D5A1D4C41BCE09C450C9E0284CB7F5CDE1020A25672DEA66094FAEC734479D8328135543541D7AA4A296E756FF2DD0E1868D94296DCBEB7C114C2333179574810F85240A4426B0DD0E694F38810A3E47853701C4F920397C75D8D305B14B65451FD0FDDAEEB5D8A40755900986239A755590B3B2C668B79033FC8895DBEA9E71C2F509150C4488884344B6AF20F33F475C0D5E0F17AE35BF91449332A0B0C7FB2729DB1006654416C31820F085A7EEB1DF556879157D136462C; ASP.NET_SessionId=32141f4agpdwg11fect54pra")

	res, err := client.Do(req)
	if err != nil {
		fmt.Println(err)
		return
	}
	defer res.Body.Close()

	body, err := io.ReadAll(res.Body)
	if err != nil {
		fmt.Println(err)
		return
	}
	fmt.Println(string(body))
}
